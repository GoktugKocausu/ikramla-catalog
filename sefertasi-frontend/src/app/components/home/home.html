<app-header 
  [categories]="categories" 
  (categorySelected)="filterByCategory($event)"
  (searchTerm)="searchProducts($event)">
</app-header>

<main class="container">
  <!-- Hero Section -->
  <section class="hero-section">
    <h1>Hoş Geldiniz</h1>
    <p>En lezzetli ürünlerimizi keşfedin</p>
  </section>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Ürünler yükleniyor...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-message">
    {{ error }}
  </div>

  <!-- Selected Category -->
  <div *ngIf="selectedCategory" class="category-filter">
    <p>Kategori: <strong>{{ selectedCategory }}</strong></p>
    <button (click)="filterByCategory('')" class="clear-filter">Filtreyi Temizle</button>
  </div>

  <!-- Products Grid -->
  <div *ngIf="!loading && !error" class="products-grid">
    <div *ngFor="let product of products; trackBy: trackByProductId" class="product-card">
      <!-- Discount Badge -->
      <span *ngIf="hasDiscount(product)" class="discount-badge">
        %{{ getDiscountPercentage(product) }}
      </span>

      <!-- Product Image -->
      <div class="product-image">
        <img [src]="product.imageUrl" [alt]="product.name" (error)="onImageError($event)">
      </div>

      <!-- Product Info -->
      <div class="product-info">
        <h3 class="product-title">{{ product.name }}</h3>
        <p class="product-description">{{ product.description }}</p>
        
        <!-- Price -->
        <div class="product-prices">
          <span *ngIf="hasDiscount(product)" class="original-price">{{ product.price }} TL</span>
          <span class="current-price">{{ getDiscountedPrice(product) }} TL</span>
        </div>

        <!-- Tags -->
        <div *ngIf="product.tags && product.tags.length > 0" class="product-tags">
          <span *ngFor="let tag of product.tags" class="tag">{{ tag }}</span>
        </div>

        <!-- Add to Cart Button -->
        <button class="add-to-cart" (click)="addToCart(product)">
          Sepete Ekle
        </button>
      </div>
    </div>
  </div>

  <!-- No Products Message -->
  <div *ngIf="!loading && !error && products.length === 0" class="no-products">
    <p>Ürün bulunamadı.</p>
  </div>
</main>

<app-footer></app-footer>